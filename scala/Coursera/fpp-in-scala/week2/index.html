<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Higher order functions - sundicide</title>
        <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../..">sundicide</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../../.." class="nav-link">Welcome to MkDocs</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Scala <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../" class="dropdown-item">Welcome</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Coursera</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../" class="dropdown-item">Index</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Fpd in scala</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../fpd-in-scala/" class="dropdown-item">Index</a>
</li>
            
<li>
    <a href="../../fpd-in-scala/week1_1-RecapFunctionsAndPatternMatching/" class="dropdown-item">Week1-1: Recap: Functions and Pattern Matching</a>
</li>
            
<li>
    <a href="../../fpd-in-scala/week1_2-RecapCollections/" class="dropdown-item">Week1-2: Recap: Collections</a>
</li>
            
<li>
    <a href="../../fpd-in-scala/week3_1-typedirectedprogramming/" class="dropdown-item">Week3-1: Type-Directed Programming</a>
</li>
            
<li>
    <a href="../../fpd-in-scala/week3_2-typeclasses/" class="dropdown-item">Week3-2: Type Classes</a>
</li>
            
<li>
    <a href="../../fpd-in-scala/week3_3-ConditionalImplicitDefinitions/" class="dropdown-item">Week3-3: Conditional Implicit Definitions</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Fpp in scala</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../week1/" class="dropdown-item">Week1</a>
</li>
            
<li>
    <a href="../week1_1-ProgrammingParadigms/" class="dropdown-item">Lecture 1.1 - Programming Paradigms</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Higher order functions</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../week1_1-ProgrammingParadigms/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#higher-order-functions" class="nav-link">Higher order functions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#anonymous-function" class="nav-link">Anonymous Function</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#currying" class="nav-link">Currying</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#example-finding-fixed-points" class="nav-link">Example: Finding Fixed Points</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#functions-as-return-values" class="nav-link">functions as return values</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#functions-and-data" class="nav-link">Functions and Data</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#classes" class="nav-link">Classes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#objects" class="nav-link">Objects</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#more-fun-with-rationals" class="nav-link">More Fun With Rationals</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#self-reference" class="nav-link">Self Reference</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#preconditions" class="nav-link">Preconditions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#assertions" class="nav-link">Assertions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#constructors" class="nav-link">Constructors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#evaluation-and-operators" class="nav-link">Evaluation and Operators</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#operators" class="nav-link">Operators</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#precedence-rules" class="nav-link">Precedence Rules</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="higher-order-functions">Higher order functions</h1>
<p>pass functions as arguments and retun them as results.</p>
<p>functional languages treat functions as first-class values.
= like any other value, a function can be passed as a parameter and returned as a result.</p>
<p>provides a flexible way to compose program.</p>
<h2 id="anonymous-function">Anonymous Function</h2>
<p>함수를 parameter로 전달하다보면 many small function을 만들게 된다. 그렇게 되면 각각의 naming을 정하는 것은 어렵게 된다.
=&gt; anonymous function을 사용한다.</p>
<pre><code class="scala">def str = &quot;abc&quot;; println(str)

println(&quot;abc&quot;)
</code></pre>

<p>위에는 str 변수를 정의해서 호출했고 아래는 정의 없이 사용 했다.
이것이 가능한 이유는 뭘까?
=&gt; str은 literals 이기 때문이다.</p>
<p>마찬가지로 이름 없이 함수를 쓰면 function literals가 된다.
= anonymous functions</p>
<pre><code class="scala">// cube anonymous func
(x: Int) =&gt; x * x * x
</code></pre>

<p><code>(x: Int)</code>는 parameter
<code>x * x  * x</code>는 body</p>
<pre><code class="scala">def sum(f: Int =&gt; Int, a: Int, b: Int): Int = {
  @tailrec
  def loop(a: Int, acc: Int): Int = {
    if (a &gt; b) acc
    else loop(a + 1, f(a) + acc)
  }
  loop(a, 0)
}
def sumInts(a: Int, b: Int) = sum(x =&gt; x, a, b)

def sumCubes(a: Int, b: Int) = sum(x =&gt; x * x * x, a, b)
</code></pre>

<h1 id="currying">Currying</h1>
<p>아래 함수를 더 짧게 할 수는 없을까?</p>
<pre><code class="scala">def sumInts(a: Int, b: Int) = sum(x =&gt; x, a, b)
</code></pre>

<pre><code class="scala">def sum()
</code></pre>

<pre><code class="scala">def sum(f: Int =&gt; Int)(a: Int, b: Int): Int =
  if (a &gt; b) 0 else f(a) + sum(f)(a + 1, b)

def product(f: Int =&gt; Int)(a: Int, b: Int): Int =
  if (a &gt; b) 1
  else f(a) * product(f)(a + 1, b)
</code></pre>

<p>위와 같은 스타일의 definition과 function을 currying이라고 부른다. Haskell Brooks Curry의 이름을 딴 네이밍이다.
Idea는 그 보다 전인 Schonfinkel과 Frege에 의해서 나왔지만 currying이란 네임으로 굳어졌다.</p>
<h1 id="example-finding-fixed-points">Example: Finding Fixed Points</h1>
<p>A number x is called a fixed point(고정 점) of a function f if</p>
<blockquote>
<p>f(x) = x</p>
</blockquote>
<p>예로 f: x =&gt; 1 + x/2 라 할 때 fixed point는 2이다.
f(2) = 2이므로</p>
<p>몇몇 함수들은 f를 반복적으로 수행함으로서 fixed point를 찾을 수 있다.</p>
<blockquote>
<p>x, f(x), f(f(x)), f(f(f(x))), ...</p>
</blockquote>
<p>initial estimate로 시작해서 f를 반복적으로 수행하다보면 더 이상 변하지 않는 값 혹은 변경이 충분히 적어졌을 때의 값을 fixed point라 부를 수 있다.</p>
<pre><code class="scala">import math.abs

val tolerance = 0.0001
def isCloseEnough(x: Double, y: Double): Boolean =
  abs((x - y) / x) / x &lt; tolerance

def fixedPoint(f: Double =&gt; Double)(firstGuess: Double) = {
  @tailrec
  def iterate(guess: Double): Double = {
    val next = f(guess)
    if (isCloseEnough(guess, next)) next
    else iterate(next)
  }
  iterate(firstGuess)
}
fixedPoint(x =&gt; 1 + x/2)(1) // 1.9975

def sqrt(x: Double) = fixedPoint(y =&gt; x / y)(1)
sqrt(2) // 무한 loop
</code></pre>

<p>위의 예에서 sqrt(2)를 수행하면 무한 loop가 발생한다.
1과 2 를 계속 반복한다
이를 해결 하기 위해서는 첫 번째 계산 값과 두 번째 계산 값의 평균을 구하면 된다.</p>
<pre><code class="scala">def sqrt(x: Double) =
  fixedPoint(y =&gt; (y + x / y) / 2)(1)
</code></pre>

<h2 id="functions-as-return-values">functions as return values</h2>
<p>위의 예제에서 평균을 통해 안정화시키는 기술은 추상화 될 수 있다.</p>
<pre><code class="scala">def averageDamp(f: Double =&gt; Double)(x: Double) =
  (x + f(x)) / 2
def sqrt3(x: Double) =
  fixedPoint(averageDamp(y =&gt; x / y))(1)
</code></pre>

<p>Higher Order Function이 항상 옳은 것은 아니며 적절 할 때 사용해야 한다.</p>
<h1 id="functions-and-data">Functions and Data</h1>
<h2 id="classes">Classes</h2>
<pre><code class="scala">class Rational(x: Int, y: Int):
  def numer = x
  def denom = y
</code></pre>

<p>위 정의는 two entities를 생성한다.
- Rational 이라는 이름의 new type
- 이 type의 element를 만들기 위한 Rational constructo</p>
<p>스칼라는 types과 value의 names를 <code>different namespace</code>에 보관하기 때문에 충돌을 걱정할 필요 없다.</p>
<h2 id="objects">Objects</h2>
<p>elements of a class type을 objects라고 부른다.
class 의 생성자를 calling 함으로서 object를 만들 수 있다.</p>
<pre><code class="scala">Rational(1, 2)
</code></pre>

<p>아래와 같이 class내 member에 접근 가능하다</p>
<pre><code class="scala">val x = Rational(1 ,2)
x.numer
x.denom
</code></pre>

<pre><code class="scala">object rationals {
  val x = new Rational(1, 3)
  val y = new Rational(5, 7)
  val z = new Rational(3, 2)

  x.add(y).mul(z)
}
class Rational(x: Int, y: Int) {
  def numer = x
  def denom = y

  def add(r: Rational) =
    new Rational(numer * r.denom + r.numer * denom,
      denom * r.denom)

  def mul(r: Rational) =
    new Rational(numer * r.numer,
      denom * r.denom)

  def neg = new Rational(-numer, denom)

  def sub(r: Rational) = add(r.neg)

  override def toString = s&quot;$numer/$denom&quot;
}

</code></pre>

<h1 id="more-fun-with-rationals">More Fun With Rationals</h1>
<p>Client's view에서는 내부가 어떻게 동작하던지 동일하게 보인다.</p>
<p>without affecting client를 하면서 다른 구현을 선택하는 것을 <code>data abstraction</code>이라고 한다.
S/E에서의 cornerstone이다.</p>
<h2 id="self-reference">Self Reference</h2>
<p>inside of a class, <code>this</code>는 현재 실행 중인 method내에서의 object를 의미한다</p>
<h2 id="preconditions">Preconditions</h2>
<p><code>require</code>로 class에 조건을 추가할 수 있다.
조건에 맞지 않으면 IllegalArgumentException이 발생하며 추가한 에러 메세지가 출력된다.</p>
<h2 id="assertions">Assertions</h2>
<p>require와 비슷한 의미이다.
require와 동일하게 condtion과 optional message string을 받는다.</p>
<pre><code class="scala">val x = sqrt(y)
assert(x &gt;= 0)
</code></pre>

<p>fail일 경우 assert는 require와 달리 AssertionError를 발생한다.</p>
<ul>
<li>require는 함수 호출자에게 precondition을 강요할 때 쓰인다</li>
<li>assert는 함수 자신이 체크 할 때 사용한다.</li>
</ul>
<h2 id="constructors">Constructors</h2>
<p>모든 class는 primary constructor(기본 생성자)가 암시적으로 있다.
- class의 모든 paramters를 받고
- class body의 모든 statement를 실행한다.</p>
<p>Java 같이 여러 생성자를 갖는 것도 가능하다.</p>
<pre><code class="scala">object rationals {
  val x = new Rational(1, 3)
  val y = new Rational(5, 7)
  val z = new Rational(3, 2)

  x.add(y).mul(z)
  y.add(y)
  x.less(y)
  x.max(y)
  new Rational(2)
}
class Rational(x: Int, y: Int) {
  require(y != 0, &quot;denominator must be nonezero&quot;)

  def this(x: Int) = this(x, 1) // 여기에서의 this는 constructor 의미로 쓰인다.

  private def gcd(a: Int, b: Int): Int = if (b == 0) a else gcd(b, a % b)
  private val g = gcd(x, y) // val로 선언했기에 바로 평가되서 다음 부턴 계산을 안하고 재사용한다.
  def numer = x / g
//    def numer = x / gcd(x,y) // 만약 이와 같이 선언 하면 매번 gcd를 계산해야 한다. 계산 리소스가 크고 가끔 호출될 때 사용하면 좋다.
  def denom = y / g

  def less(that: Rational) = numer * that.denom &lt; that.numer * denom
  def max(that: Rational) = if (this.less(that)) that else this

  def add(r: Rational) =
    new Rational(numer * r.denom + r.numer * denom,
      denom * r.denom)

  def mul(r: Rational) =
    new Rational(numer * r.numer,
      denom * r.denom)

  def neg = new Rational(-numer, denom)

  def sub(r: Rational) = add(r.neg)

  override def toString = s&quot;$numer/$denom&quot;
}

</code></pre>

<h1 id="evaluation-and-operators">Evaluation and Operators</h1>
<h2 id="operators">Operators</h2>
<h3 id="infix-notation">Infix Notation</h3>
<p>parameter를 갖는 모든 메소드는 infix operaotr처럼 사용할 수 있다.</p>
<p>r add s           r.add(s)
r less s          r.less(s)
r max s           r.max(s)</p>
<h3 id="relaxed-identifiers">Relaxed Identifiers</h3>
<p>operaotr는 identifier로 사용될 수 있다.
- 영문자: 문자로 시작하고, 뒤에는 문자 혹은 숫자가 올 수 있다.
- Symbolic: operator symbol로 시작해서, 다른 심볼이 뒤에 올 수 있다.
- <code>_</code> 문자는 문자로 카운트 된다
- 영문자 identifiers는 underscore로 끝날 수 있고 뒤에 다른 operator symbols가 붙을 수 있다.
* 만약 끝이 symbol들로 끝나면 뒤에 타입을 위한 <code>:</code> 과 한 칸 띄워야 한다.</p>
<p>examples
- x1
- *
- +?%&amp;
- vector_++
- counter_=</p>
<p>-a 처럼 빼기가 아니라 마이너스 operator를 추가하고 싶다면 아래와 같이 해야 한다.
(<code>unary_</code> 가 앞에 붙어야 하고 <code>:</code>과 한칸 띄워 써야 한다.)</p>
<pre><code class="scala">def unary_- : Rational = new Rational(-numer, denom)
</code></pre>

<h2 id="precedence-rules">Precedence Rules</h2>
<p>연산자 우선순위.
첫 번째 문자에 따라 결정된다.
Java혹은 C와 차이 없다.</p>
<p>1번이 가장 낮은 순위이다.</p>
<ol>
<li>(all letters)</li>
<li>|</li>
<li>^</li>
<li>&amp;</li>
<li>&lt; &gt;</li>
<li>= !</li>
<li>:</li>
<li>
<ul>
<li>-</li>
</ul>
</li>
<li>
<ul>
<li>/ %</li>
</ul>
</li>
<li>(all other special values)</li>
</ol></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
