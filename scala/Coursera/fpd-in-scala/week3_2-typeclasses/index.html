<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../../../img/favicon.ico">
  <title>Week3-2: Type Classes - sundicide</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../../../css/theme.css" />
  <link rel="stylesheet" href="../../../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Week3-2: Type Classes";
    var mkdocs_page_input_path = "scala/Coursera/fpd-in-scala/week3_2-typeclasses.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../../../.." class="icon icon-home"> sundicide</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../..">Welcome to MkDocs</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Scala</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../../../">Welcome</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Coursera</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../../">Index</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Fpd in scala</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../">Index</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../week1_1-RecapFunctionsAndPatternMatching/">Week1-1: Recap: Functions and Pattern Matching</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../week1_2-RecapCollections/">Week1-2: Recap: Collections</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../week3_1-typedirectedprogramming/">Week3-1: Type-Directed Programming</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="./">Week3-2: Type Classes</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#retroactive-extension">Retroactive Extension</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#laws">Laws</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#example-of-type-class-ring">Example of Type Class: Ring</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../week3_3-ConditionalImplicitDefinitions/">Week3-3: Conditional Implicit Definitions</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Fpp in scala</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../fpp-in-scala/week1/">Week1</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../fpp-in-scala/week1_1-ProgrammingParadigms/">Lecture 1.1 - Programming Paradigms</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../fpp-in-scala/week2/">Week2</a>
                </li>
    </ul>
                </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../..">sundicide</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Fpd in scala &raquo;</li>
        
      
        
          <li>Coursera &raquo;</li>
        
      
        
          <li>Scala &raquo;</li>
        
      
    
    <li>Week3-2: Type Classes</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="week3-2-type-classes">Week3-2: Type Classes</h1>
<p>In the previous lectures we have seen a particular pattern of code combining parameterized types and implicits.
We have defined a parameterized type Ordering[A], implicit instances of that type for concrete types A, and implicit parameters of type Ordering[A]:</p>
<pre><code class="scala">trait Ordering[A] {
  def compare(a1: A, a2: A): Int
}

object Ordering {
  implicit val Int: Ordering[Int] =
    new Ordering[Int] {
      def compare(x: Int, y: Int) = if (x &lt; y) -1 else if (x &gt; y) 1 else 0
    }
  implicit val String: Ordering[String] =
    new Ordering[String] {
      def compare(s: String, t: String) = s.compareTo(t)
  }
}

def sort[A: Ordering](xs: List[A]): List[A] = ...
</code></pre>

<p>We say that Ordering is a type class.</p>
<p>Type classes provide yet another form of polymorphism.
The method sort can be called with lists containing elements of any type A for which there is an implicit value of type Ordering[A].</p>
<p>At compile-time, the compiler resolves the specific Ordering implementation that matches the type of the list elements.</p>
<h2 id="retroactive-extension">Retroactive Extension</h2>
<p>Type classes let us add new features to data types without changing the original definition of these data types. For instance, consider the following Rational type, modeling a rational number:</p>
<pre><code class="scala">/** A rational number
  * @param num   Numerator
  * @param denom Denominator
  */
case class Rational(num: Int, denom: Int)
</code></pre>

<p>We can add the capability "to be compared" to the type Rational by defining an implicit instance of type Ordering[Rational]:</p>
<pre><code class="scala">object RationalOrdering {
  implicit val orderingRational: Ordering[Rational] =
    new Ordering[Rational] {
      def compare(q: Rational, r: Rational): Int =
        q.num * r.denom - r.num * q.denom
    }
}
</code></pre>

<h2 id="laws">Laws</h2>
<p>So far, we have shown how to implement instances of a type class, for some specific types (Int, String, and Rational).</p>
<p>Now, let’s have a look at the other side: how to use (and reason about) type classes.</p>
<p>For example, the sort function is written in terms of the Ordering type class, whose implementation is itself defined by each specific instance, and is therefore unknown at the time the sort function is written. If an Ordering instance implementation is incorrect, then the sort function becomes incorrect too!</p>
<p>To prevent this from happening, type classes are often accompanied by laws, which describe properties that instances must satisfy, and that users of type classes can rely on.</p>
<p>Can you think of properties that instances of the type class Ordering must satisfy, so that we can be confident that the method sort won’t be broken?</p>
<p>Instances of the Ordering[A] type class must satisfy the following properties:</p>
<ul>
<li>inverse: the sign of the result of comparing x and y must be the inverse of the sign of the result of comparing y and x,</li>
<li>transitive: if a value x is lower than y and that y is lower than z, then x must also be lower than z,</li>
<li>consistent: if two values x and y are equal, then the sign of the result of comparing x and z should be the same as the sign of the result of comparing y and z.</li>
</ul>
<p>The authors of a type class should think about such kind of laws and they should provide ways for instance implementers to check that these laws are satisfied.</p>
<h2 id="example-of-type-class-ring">Example of Type Class: Ring</h2>
<p>Let’s see how we can define a type class modeling a ring structure. A ring is an algebraic structure defined as follows according to Wikipedia:</p>
<p>In mathematics, a ring is one of the fundamental algebraic structures used in abstract algebra. It consists of a set equipped with two binary operations that generalize the arithmetic operations of addition and multiplication. Through this generalization, theorems from arithmetic are extended to non-numerical objects such as polynomials, series, matrices and functions.</p>
<p>This structure is so common that, by abstracting over the ring structure, developers could write programs that could then be applied to various domains (arithmetic, polynomials, series, matrices and functions).</p>
<p>A ring is a set equipped with two binary operations, + and *, satisfying the following laws (called the ring axioms):</p>
<p>(a + b) + c = a + (b + c)   + is associative
a + b = b + a   + is commutative
a + 0 = a   0 is the additive identity
a + -a = 0  -a is the additive inverse of a
(a * b) * c = a * (b * c)   * is associative
a * 1 = a   1 is the multiplicative identity
a * (b + c) = a * b + a * c left distributivity
(b + c) * a = b * a + c * a right distributivity
Here is how we can define a ring type class in Scala:</p>
<pre><code class="scala">trait Ring[A] {
  def plus(x: A, y: A): A
  def mult(x: A, y: A): A
  def inverse(x: A): A
  def zero: A
  def one: A
}
</code></pre>

<p>Here is how we define an instance of Ring[Int]:</p>
<pre><code class="scala">object Ring {
  implicit val ringInt: Ring[Int] = new Ring[Int] {
    def plus(x: Int, y: Int): Int = x + y
    def mult(x: Int, y: Int): Int = x * y
    def inverse(x: Int): Int = -x
    def zero: Int = 0
    def one: Int = 1
  }
}
</code></pre>

<p>Finally, this is how we would define a function that checks that the + associativity law is satisfied by a given Ring instance:</p>
<pre><code class="scala">def plusAssociativity[A](x: A, y: A, z: A)(implicit ring: Ring[A]): Boolean =
  ring.plus(ring.plus(x, y), z) == ring.plus(x, ring.plus(y, z))
</code></pre>

<p>Note: in practice, the standard library already provides a type class Numeric, which models a ring structure.</p>
<h2 id="summary">Summary</h2>
<p>In this lesson we have identified a new programming pattern: type classes.</p>
<p>Type classes provide a form of polymorphism: they can be used to implement algorithms that can be applied to various types. The compiler selects the type class implementation for a specific type at compile-time.</p>
<p>A type class definition is a trait that takes type parameters and defines operations that apply to these types. Generally, a type class definition is accompanied by laws, checking that implementations of their operations are correct.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../week3_3-ConditionalImplicitDefinitions/" class="btn btn-neutral float-right" title="Week3-3: Conditional Implicit Definitions">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../week3_1-typedirectedprogramming/" class="btn btn-neutral" title="Week3-1: Type-Directed Programming"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../week3_1-typedirectedprogramming/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../week3_3-ConditionalImplicitDefinitions/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/theme.js" defer></script>
      <script src="../../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
